<section class="comments__section">
  <div class="row">
    <div id="newWorkingGroup">
      <form name="newAssemblyForm1">
        <div class="col-lg-12 col-md-12 col-xs-12">
          <div id="description" class="box descriptionBox">
            <p>{{'definition.wgroup' | translate}}</p>
          </div>
          <!--&lt;!&ndash; Campaign Select if no campaign has been selected &ndash;&gt;-->
          <!--<div id="campaignSelect" class="form-horizontal" ng-if="!isEdit">-->
            <!--<div class="row form-group">-->
              <!--<label for="selectCampaignOfAssembly" class="no-padding col-sm-12 col-lg-12 col-md-12 col-xs-12 control-label">-->
              <!--{{'Campaigns of the Group'|translate}}:*</label>-->
              <!--<select name="campaignSelect" ng-model="newWorkingGroup.campaign" ng-options="campaign as campaign.title for campaign in ongoingCampaigns">-->
                <!--<option value="">{{'Select a campaign for the Workging Group' | translate}}</option>-->
              <!--</select>-->
            <!--</div>-->
          <!--</div>-->
          <div id="workingGroupName" class="form-horizontal">
            <div class="form-group">
              <label for="inputNameNewWorkingGroup" class="no-padding col-sm-2 col-md-2 control-label">{{'Name' | translate}}*</label>
              <input id="inputNameNewWorkingGroup" class="form-control" placeholder="{{'wgroups.name.example' | translate}}"
                ng-model="newWorkingGroup.name" type="text" ng-required="true">
            </div>
          </div>
          <div id="workingGroupDescription" class="form-horizontal">
            <div class="form-group">
              <label for="inputDescriptionNewWorkingGroup" class="no-padding col-sm-2 col-md-2 control-label">
              {{'Description'|translate}}*
              </label>
              <textarea id="inputDescriptionNewWorkingGroup" class="form-control" maxlength="400" placeholder="{{'wgroups.text.example' | translate}}"
                ng-model="newWorkingGroup.text" />

            </div>
          </div>
          <div id="workingGroupThemes" class="form-horizontal">
            <div class="form-group">
              <label for="checkConfirmCampaignGoals" class="control-label">{{'wgroups.select.campaign.themes' | translate}}</label>
              <div class="box selectionBox col-md-12 col-sm-12" id="checkConfirmCampaignGoals">
                <div class="themes-container-content optionThemes" ng-repeat="theme in campaignThemes track by $index">
                  <input ng-disabled="isEdit" type="checkbox" ng-model="campaignThemes[$index].selected">
                  <span>{{theme.title}}</span>
                </div>
              </div>
            </div>
          </div>


          <!--icons -->
          <div id="workingGroupIcon" class="form-horizontal">
            <div class="col-md-12 form-group">
              <label class="control-label" translate='wgroups.select.icon'> </label>
              <br/>
              <div class="picsList">
                <div ng-repeat="icon in defaultIcons">
                  <div class="col-md-4">
                    <div class="image-capsule">
                      <img alt="{{icon.name}}" ng-src="{{icon.url}}" class="image-circle" ng-class="{'image-circle-selected-shadow': icon.name === f.name}"
                        ng-click="setNewWorkingGroupIcon(icon.url, icon.name)">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12 voffset3"></div>
          <div id="assemblyIconProgress" class="form-horizontal">
            <div class="col-lg-4 add-button">
              <span>
              <button class="btn" type="button" ngf-select="uploadFiles($file, $invalidFiles)" accept="image/*" ngf-max-size="2MB">
                {{ 'Upload' |  translate}}
              </button>
            </span>
              <span>
              <strong>{{ 'selected.icon' | translate }}: </strong>
            </span>
              <span>
              <div class="image-capsule">
                <img alt="{{f.name}}" ng-src="{{f.url}}" class="image-circle image-circle-selected">
              </div>
            </span>
            </div>
          </div>

          <!--covers -->
          <div id="workingGroupCover" class="form-horizontal">
            <div class="col-md-12 form-group">
              <label class="control-label" translate='wgroups.select.cover'> </label>
              <br/>
              <div class="picsList">
                <div ng-repeat="cover in defaultCovers">
                  <div class="col-md-4">
                    <div class="image-capsule">
                      <img alt="{{cover.name}}" ng-src="{{cover.url}}" class="image-circle" ng-class="{'image-circle-selected-shadow': cover.name === g.name}"
                        ng-click="setNewWorkingGroupCover(cover.url, cover.name)">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12 voffset3"></div>
          <div id="assemblyCoverProgress" class="form-horizontal">
            <div class="col-lg-4 add-button">
              <span>
              <button class="btn" type="button" ngf-select="uploadFiles($file, $invalidFiles)" accept="image/*" ngf-max-size="2MB">
                {{ 'Upload' |  translate}}
              </button>
            </span>
              <span>
              <strong>{{ 'selected.cover' | translate }}: </strong>
            </span>
              <span>
              <div class="image-capsule">
                <img alt="{{g.name}}" ng-src="{{g.url}}" class="image-circle image-circle-selected">
              </div>
            </span>
            </div>
          </div>

          <!-- colors -->
          <div id="workingGroupColors" class="form-horizontal">
            <div class="col-md-12 form-group">
              <label class="control-label" translate='wgroups.select.color'> </label>
              <br/>
                <span ng-repeat="color in defaultColors">
                  <button ng-style="{'background-color':color.color}" ng-click="setNewWorkingGroupColor(color.color)">&nbsp;</button>
                </span>
                <span class="selected">
                  <strong>{{ 'selected.color' | translate }}: </strong>
                  <div class="color-capsule">
                    <div ng-style="{'background-color':h}">
                  </div>
                </span>
            </div>
          </div>


          <div id="workingGroupMembership" class="row form-horizontal">
            <div class="form-group">
              <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                <div class="checkbox">
                  <label>
                    <input type="checkbox" value="isTopic" ng-model="isTopic">
                    {{'Is Topic?' | translate}}
                  </label>
                </div>
              </div>
              <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                <label>{{'How do people become members?' | translate}}</label>
                <div class="radio">
                  <label>
                    <input type="radio" name="membership" id="openRadio" value="OPEN" ng-checked="(isTopic)"
                      ng-model="newWorkingGroup.profile.membership">
                    {{'Opened' | translate}}
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="membership" id="registrationRadio" value="REGISTRATION" ng-model="newWorkingGroup.profile.membership">
                    {{'Registration' | translate}}
                  </label>
                </div>
              </div>
              <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12 optionsBox" ng-show="newWorkingGroup.profile.membership === 'REGISTRATION'">
                <label class="optionsBox-title">{{'Membership by registration' | translate}}
                   <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.supportedMembershipRegistration' | translate}}"></i>
                </label>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-model="newWorkingGroup.profile.registration.invitation"/>
                    <p style="display: inline;">{{'By invitation' | translate}}, {{'and/or' | translate}}</p>
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                  <input type="checkbox" ng-model="newWorkingGroup.profile.registration.request" checked/>
                  <p style="display: inline;">{{'By request' | translate}}</p>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div id="groupManagement" class="form-horizontal">
            <div class="form-group">
              <label for="inputManagementType" class="control-label">
              {{'Who will be able to change settings and remove inappropriate comments?' | translate}}
              </label>
              <div class="col-md-12 grayBox" id="inputManagementType">
                <div class="checkbox">
                  <label>
                    <input ng-disabled="isEdit" type="checkbox" ng-model="newWorkingGroup.profile.moderators"/>
                    <strong>{{'Enable moderation' | translate}}</strong>
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input ng-disabled="isEdit" type="checkbox" ng-model="newWorkingGroup.profile.coordinators"/>
                    <strong>{{'Enable coordination' | translate}}</strong>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div id="brainstormingContributions" class="form-horizontal">
            <div class="form-group">
              <label class="control-label">
                {{'Select brainstorming contributions to develop' | translate}}
                <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.brainstorming' | translate}}"></i>
              </label>
              <div ng-repeat="contribution in contributions track by $index">
                <div class="checkbox" ng-if="contribution.type === 'BRAINSTORMING'">
                  <label>
                    <input ng-disabled="isEdit" type="checkbox" ng-model="contribution.addToGroup"/>
                  </label>
                  <span>{{contribution.title | limitTo:46}}{{contribution.title.length > 46 ? '...' : '.'}}</span>
                </div>
              </div>
            </div>
          </div>
          <div id="groupInvitations" class="form-horizontal" ng-if="!isEdit">
            <div class="form-group">
              <!-- Invitations for members -->
              <label class="control-label">
                {{'Invite people to join' | translate}}
                <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.invitations' | translate}}"></i>
              </label>
              <div class="col-md-12 voffset3"></div>
              <div class="col-lg-12col-md-12 col-sm-12">
                <label class="control-label">{{'Choose from the list of members of the assembly' | translate}}</label>
              </div>
              <div ng-repeat="member in assemblyMembers track by $index">
                <div class="checkbox" ng-if="member.user.email!=user.email">
                  <label style="display: inline;">
                    <input type="checkbox" ng-model="member.invite"
                      ng-click="addAssemblyMemberToInvitationList(member,$index)"/>
                  </label>
                  <span><strong>{{member.user.name}}</strong> ({{member.user.email}})</span>
                </div>
              </div>
              <div class="col-lg-12 col-md-12 col-sm-12">
                <label class="control-label">{{'Add emails of new members who are not in the assembly yet' | translate}}</label>
              </div>
              <textarea class="form-control" id="invitees" rows="4" ng-model="inviteesEmails"></textarea>
              <div class="col-md-8 col-sm-8"></div>
              <div class="col-md-4 col-sm-4 add-button">
                <span><a ng-click="addEmailsToList(inviteesEmails)">
          <img data-src="holder.js/100x100" alt="100x100" src="../assets/images/addIcon.png"
            data-holder-rendered="true" style="cursor: pointer; height: 25px; width:25px;">
          </a></span>
                <span><h5 width="50px;">{{'Add to list'|translate}}</h5></span>
              </div>
              <div class="col-md-12 voffset3"></div>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th class="remove-column"></th>
                    <th class="email-column">{{'Email' | translate}}</th>
                    <th class="coordinator-column">{{'Coordinator' | translate}}</th>
                    <th class="moderator-column">{{'Moderator' | translate}}</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="invitee in newWorkingGroup.invitations track by $index">
                    <td class="remove-column">
                      <span class="glyphicon glyphicon-remove" aria-hidden="true" ng-click="removeInvitee($index)"></span>
                    </td>
                    <td class="email-column">{{invitee.email}}</td>
                    <td class="coordinator-column">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" ng-model="invitee.coordinator"/>
                        </label>
                      </div>
                    </td>
                    <td class="moderator-column">
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" ng-model="invitee.moderator"/>
                        </label>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
              <br/>
              <uib-alert ng-repeat="email in invalidEmails track by $index" type="danger" close="removeInvalidEmail($index)">{{'Invalid email(s)' | translate}}: {{email}} </uib-alert>
            </div>
          </div>
          <div id="groupInvitationsEmails" class="form-horizontal">
            <div class="col-md-12 form-group">
              <label class="control-label">
              {{'Invitation Email' | translate}}
              <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.invitationsEmail' | translate}}"></i>
              </label>
              <textarea class="form-control" id="invitationEmail" ng-model="newWorkingGroup.invitationEmail" rows="6"></textarea>
            </div>
          </div>
          <div id="groupConfigs" class="form-horizontal">
            <div class="form-group">
              <div class="checkbox">
                <label>
                  <strong>{{'Majority threshold' | translate}}</strong>
                  <select ng-model="newWorkingGroup.majorityThreshold" id="newWorkingGroupThreshold">
                    <option value="simple" selected>{{'Simple' | translate}}</option>
                    <option value="66">66%</option>
                    <option value="90">90%</option>
                  </select>
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input ng-disabled="isEdit" ng-model="newWorkingGroup.blockMajority" type="checkbox" name="newWorkingGroupBlocking" id="newWorkingGroupBlocking" value="newWorkingGroupBlocking">
                  <h4 style="display: inline;">{{'Enable blocking' | translate}}</h4>
                </label>
              </div>
              <div class="checkbox">
                <label>
                  <input ng-disabled="isEdit" type="checkbox" ng-model="newAssembly.listed"/>
                  <h4 style="display: inline;">
                    {{'Do you want your Working Group to be listed?' | translate}}
                    <i class="fa fa-question-circle" tooltip-placement="right" uib-tooltip="{{'help.tooltip.listedAssembly' | translate}}"></i>
                  </h4>
                </label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div id="campaignButtons1" class="">
      <div class="col-md-6">
        <button class="btn btn-primary col-md-12" ng-click="goToStep(2)" ng-disabled="!newAssemblyForm1.$valid">
        {{'Next' | translate}}
        </button>
      </div>
    </div>
  </div>
</section>
