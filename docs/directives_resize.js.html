<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: directives/resize.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: directives/resize.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>(function () {
  'use strict';

  /**
   * Directive that listen for document.resize event.
   */
  appCivistApp
    .directive('resize', resize);

  resize.$inject = ['$timeout'];

  function resize($timeout) {

    return {
      restrict: 'A',
      link: function (scope, element, attrs) {
        window.addEventListener('resize', onResize.bind(scope));
        var transitionEvent = whichTransitionEvent();

        // if we receive a eqResize event, we emmit a native resize event
        scope.$on('eqResize', function (event, animated) {
          /* delay resize if there is a transition going on */
          if (animated) {
            document.addEventListener(transitionEvent, emmitResize);
          } else {
            emmitResize();
          }
        });

        scope.$on('eqResizeEnd', function (event) {
          document.removeEventListener(transitionEvent, emmitResize)
        });
      }
    };


    /* From Modernizr */
    function whichTransitionEvent() {
      var t;
      var el = document.createElement('fakeelement');
      var transitions = {
        'transition': 'transitionend',
        'OTransition': 'oTransitionEnd',
        'MozTransition': 'transitionend',
        'WebkitTransition': 'webkitTransitionEnd'
      }

      for (t in transitions) {
        if (el.style[t] !== undefined) {
          return transitions[t];
        }
      }
    }

    function emmitResize() {
      var e = new Event('resize');
      window.dispatchEvent(e);
    }

    function onResize() {
      if (document.querySelector('.container__proposals')) {
        EqualHeights('.container__proposals .heading__working_group');
        EqualHeights('.container__proposals .heading--headline');
        EqualHeights('.container__proposals .title_block');
        EqualHeights('.container__proposals .card__header');
        EqualHeights('.container__proposals .card__body .excerpt');
        EqualHeights('.container__proposals .card__body');
      }
      this.$broadcast('eqResizeEnd');
    }

    /**
     * Added from pattern library appcivist_ui_core.js
     * Fixes some issues with contribution cards
     */
    function EqualHeights(selector) {
      var elms = document.querySelectorAll(selector);
      var len = elms.length;
      var tallest = 0;
      var elm, elmHeight, x;

      for (x = 0; x &lt; len; x++) {
        elm = elms[x];
        elmHeight = elm.offsetHeight;
        tallest = (elmHeight > tallest) ? elmHeight : tallest;
      }

      for (x = 0; x &lt; len; x++) {
        elms[x].style.height = tallest + 'px';
      }
    }
  }
} ());
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Feb 23 2017 09:57:14 GMT-0300 (PYST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
